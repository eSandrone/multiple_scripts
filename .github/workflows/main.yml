name: Time
on:
  workflow_dispatch:
jobs:
  job_1:
    runs-on: ubuntu-latest
    name: JOB_1
    outputs:
     #time: ${{ steps.time.outputs.st }}
     gj: ${{ steps.time.outputs.gj }}
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup python
        uses: actions/setup-python@v4
        with:
          python-version: "pypy3.9"

      - name: Execute scripts and kill process if necessary
        id: time
        run: |
          #echo ${{ github.job }} 
          echo ${{ github.run_id }} 
          #$time = [Math]::Round((Get-Date).ToFileTime()/10000)
          #echo "::set-output name=st::$time"
          #python ./python/wait.py 2>&1 | tee log.txt
          ls
          #cat log.txt
          echo "::set-output name=gj::${{ github.run_id }}"
          #echo "st=$time" >> $env:GITHUB_OUTPUT
          echo ${{ github.run_id }} > run_id.txt
          
      - name: Upload
        uses: actions/upload-artifact@v3
        with:
          name: run_id
          path: run_id.txt
  job_2:
    needs: job_1
    uses: eSandrone/multiple_scripts/.github/workflows/parallel_scripts.yml@main

#   job_2:
#     runs-on: ubuntu-latest
#     needs: job_1
#     outputs:
#      time: ${{ steps.time.outputs.st }}
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v3

#       - name: Execute scripts and kill process if necessary
#         id: time
#         run: |
#           sleep 10
#           echo ${{ needs.job_1.outputs.time }}
#           echo "st=${{ needs.job_1.outputs.time }}" >> $GITHUB_OUTPUT
#   job_3:
#     runs-on: ubuntu-latest
#     needs: job_2
#     outputs:
#      time: ${{ steps.time.outputs.time }}
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v3

#       - name: Execute scripts and kill process if necessary
#         id: time
#         run: |
#           echo $(date +"%s")-${{ needs.job_2.outputs.time }}
